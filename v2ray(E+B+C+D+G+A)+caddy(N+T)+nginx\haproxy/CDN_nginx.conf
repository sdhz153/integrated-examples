#使用多组域名实现CDN流量中转与正常应用共存配置
#原配置：
#.........<省略>........
stream {
    map $ssl_preread_server_name $backend_name {
        zv.xx.yy  vless; #zv.xx.yy修改为自己规划对应vless+tcp+tls的域名
        zh.xx.yy  https; #zh.xx.yy修改为自己规划对应https server的域名
    }
#.........<省略>........

#以上配置修改为如下：
#.........<省略>........
stream {
    map $ssl_preread_server_name $backend_name {
        zv.xx.yy  vless; #zv.xx.yy修改为自己规划对应vless+tcp+tls的域名
        zh.xx.yy  https; #zh.xx.yy修改为自己规划对应https server的域名
        z1.xx.yy  vless; #z1.xx.yy修改为自己规划对应vless+ws+tls与shadowsocks+xray-plugin/v2ray-plugin+tls的CDN流量中转域名
        z3.xx.yy  https; #z3.xx.yy修改为自己规划对应vless+grpc+tls与trojan-go（WebSocket）的CDN流量中转域名
    }
#.........<省略>........
#注意：
#1、如域名使用通配符证书及密钥或SAN证书及密钥，除上面修改外无需其它调整。如果希望CDN流量中转的域名也可访问回落或代理网站，caddy限定域名访问增加对应域名即可。
#2、因使用域名不超过五个（免费证书受限每周证书更新限制不超过五个），故可以使用caddy申请普通证书及密钥。
#1）、caddy需增加CDN流量中转域名证书申请及限定域名访问增加对应域名。（详见TLS_caddy.json或TLS_Caddyfile）
#2）、还必须在Xray或v2ray配置中增加两组证书及密钥配置，及更改为caddy申请的证书及密钥路径。（详见CDN_patch_v2ray_config.json）
#3、如域名使用第三方申请的普通证书及密钥，太麻烦、不推荐、也不提供方法。
